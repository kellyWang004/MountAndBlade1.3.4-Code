<Prefab>
  <Constants>
  </Constants>
  <Window>
    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
      <Children>

        <!--Right Panel Vertical Container-->
        <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Top" StackLayout.LayoutMethod="VerticalBottomToTop" >
          <Children>
            <ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" MarginBottom="15">
              <Children>
                <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" VerticalAlignment="Center" Brush="Clan.RightPanel.Name.Text" Brush.TextHorizontalAlignment="Center" Text="@Name" />
								<NavigationScopeTargeter ScopeID="ClanIncomeManageWorkshopButtonScope" ScopeParent="..\ManageWorkshopButton" ExtendDiscoveryAreaLeft="250" ExtendDiscoveryAreaRight="550"/>
                <ButtonWidget Id="ManageWorkshopButton" DoNotPassEventsToChildren="true" UpdateChildrenStates="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="50" SuggestedHeight="50" HorizontalAlignment="Center" Brush="SPClan.Income.ManageWorkshopIcon" Command.Click="ExecuteManageWorkshop" GamepadNavigationIndex="0">
                  <Children>
                    <HintWidget DataSource="{ManageWorkshopHint}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
                  </Children>
                </ButtonWidget>
              </Children>
            </ListPanel>

            <!--Visual and Stats Horizontal Container-->
            <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren">
              <Children>
                <!--Settlement-->
                <BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="164" SuggestedHeight="309" HorizontalAlignment="Center" VerticalAlignment="Top" Brush="Encyclopedia.SubPage.Settlement.Image" Sprite="@ImageName" />

                <!--Stats Container-->
                <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Top">
                  <Children>
                    <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop">
                      <Children>
                        <ListPanel DataSource="{ItemProperties}" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginLeft="50" StackLayout.LayoutMethod="VerticalBottomToTop">
                          <ItemTemplate>
                            <StatItem MarginBottom="5" MarginTop="5" />
                          </ItemTemplate>
                        </ListPanel>
                      </Children>
                    </ListPanel>
                  </Children>
                </Widget>
              </Children>
            </ListPanel>
            
            <!--Seperator Line-->
            <Widget DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="4" HorizontalAlignment="Center" MarginTop="15" MarginBottom="15" Sprite="Clan\divider_mid" />

            <!-- Warehouse Options -->
            <NavigationScopeTargeter ScopeID="ClanWorkshopWarehouseOptionsScope" ScopeParent="..\WarehouseOptions" ScopeMovements="Horizontal" />
            <ListPanel Id="WarehouseOptions" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop">
              <Children>

                <!-- Use Warehouse as Input -->
                <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="8" MarginBottom="8">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Brush="Clan.Stat.Name.Text" Text="@UseWarehouseAsInputText">
                      <Children>
                        <HintWidget DataSource="{UseWarehouseAsInputHint}" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" IsEnabled="false" />
                      </Children>
                    </TextWidget>
                    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren">
                      <Children>
                        <ButtonWidget DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="40" SuggestedHeight="40" HorizontalAlignment="Center" Brush="SPOptions.Checkbox.Empty.Button" Command.Click="ExecuteToggleWarehouseUsage" GamepadNavigationIndex="0">
                          <Children>
                            <ImageWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="SPOptions.Checkbox.Full.Button" IsVisible="@ReceiveInputFromWarehouse" />
                          </Children>
                        </ButtonWidget>
                      </Children>
                    </Widget>
                  </Children>
                </ListPanel>
                
                <!-- Store Output Percentage -->
                <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="8" MarginBottom="8">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Brush="Clan.Stat.Name.Text" VerticalAlignment="Center" Text="@StoreOutputPercentageText">
                      <Children>
                        <HintWidget DataSource="{StoreOutputPercentageHint}" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" IsEnabled="false" />
                      </Children>
                    </TextWidget>
                    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Center">
                      <Children>
                        <Standard.DropdownWithHorizontalControl Parameter.SelectorDataSource="{WarehousePercentageSelector}" HorizontalAlignment="Center" GamepadNavigationIndex="1" />
                      </Children>
                    </Widget>
                  </Children>
                </ListPanel>
                
                <!-- Warehouse Capacity -->
                <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="8" MarginBottom="8">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Brush="Clan.Stat.Name.Text" VerticalAlignment="Center" Text="@WarehouseCapacityText" />
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Brush="Clan.Stat.Value.Text" VerticalAlignment="Center" Brush.TextHorizontalAlignment="Center" Text="@WarehouseCapacityValue" />
                  </Children>
                </ListPanel>

                <!--Seperator Line-->
                <Widget DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="4" AlphaFactor="0.3" HorizontalAlignment="Center" MarginTop="10" MarginBottom="10" Sprite="Clan\divider_mid" />

                <!--Inputs-->
                <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="10" MarginBottom="10" StackLayout.LayoutMethod="HorizontalLeftToRight">
                  <Children>
                    <TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="150" VerticalAlignment="Top" Brush="Clan.Stat.Name.Text" Text="@InputsText" />
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Top" Brush="Clan.Stat.Value.Text" Text="@InputProducts" />
                    <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="56" SuggestedHeight="42" PositionYOffset="-12" VerticalAlignment="Top" Sprite="SPGeneral\GameMenu\warehouse_icon" Color="#F4E1C4FF" />
                    <IntComparedStateChangerTextWidget OverrideDefaultStateSwitchingEnabled="true" WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="50" VerticalAlignment="Top" Brush="Clan.Stat.Name.Text" ComparisonType="GreaterThan" FirstValue="@WarehouseInputAmount" SecondValue="0" TrueState="Positive" FalseState="Negative" IntText="@WarehouseInputAmount" >
                      <Children>
                        <HintWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" DataSource="{InputWarehouseCountsTooltip}" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
                      </Children>
                    </IntComparedStateChangerTextWidget>
                  </Children>
                </ListPanel>

                <!--Outputs-->
                <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren">
                  <Children>

                    <ListPanel Id="InnerPanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="HorizontalLeftToRight" >
                      <Children>
                        <TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="150" VerticalAlignment="Top" Brush="Clan.Stat.Name.Text" Text="@OutputsText" />

                        <!-- Values -->
                        <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Top">
                          <Children>
                            <ScrollablePanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" AutoHideScrollBars="true" ClipRect="ClipRect" InnerPanel="ClipRect\InnerPanel" VerticalScrollbar="..\VerticalScrollbar">
                              <Children>
                                <Widget Id="ClipRect" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="80" MarginRight="15" ClipContents="true">
                                  <Children>
                                    <Widget Id="InnerPanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren">
                                      <Children>
                                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Center" Brush="Clan.Stat.Value.Text" Text="@OutputProducts" />
                                      </Children>
                                    </Widget>
                                  </Children>
                                </Widget>
                              </Children>
                            </ScrollablePanel>

                            <ScrollbarWidget Id="VerticalScrollbar" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedHeight="80" SuggestedWidth="8" HorizontalAlignment="Right" VerticalAlignment="Top" MarginTop="6" AlignmentAxis="Vertical" Handle="VerticalScrollbarHandle" MaxValue="100" MinValue="0" >
                              <Children>
                                <Widget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="4" HorizontalAlignment="Center" Sprite="BlankWhiteSquare_9" Color="#5a4033FF" AlphaFactor="0.2" />
                                <ImageWidget Id="VerticalScrollbarHandle" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedHeight="10" SuggestedWidth="8" HorizontalAlignment="Center" Brush="FaceGen.Scrollbar.Handle" />
                              </Children>
                            </ScrollbarWidget>
                          </Children>
                        </Widget>

                        <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="56" SuggestedHeight="42" PositionYOffset="-12" VerticalAlignment="Top" Sprite="SPGeneral\GameMenu\warehouse_icon" Color="#F4E1C4FF" />
                        <TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="50" VerticalAlignment="Top" Brush="Clan.Stat.Name.Text" IntText="@WarehouseOutputAmount">
                          <Children>
                            <HintWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" DataSource="{OutputWarehouseCountsTooltip}" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
                          </Children>
                        </TextWidget>
                      </Children>
                    </ListPanel>

                  </Children>
                </Widget>
                
              </Children>
            </ListPanel>

            <!--Seperator Line-->
            <Widget DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="4" HorizontalAlignment="Center" MarginTop="10" MarginBottom="10" Sprite="Clan\divider_mid" />

          </Children>
        </ListPanel>

      </Children>
    </Widget>
  </Window>

</Prefab>
