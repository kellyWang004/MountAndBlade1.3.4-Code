<Prefab>
	<Constants>
		<Constant Name="Popup.Width" Value="1370" />
		<Constant Name="Popup.Height" Value="680" />
		<Constant Name="Card.Width" Value="196" />
		<Constant Name="Card.Inner.Vertical.Margin" Value="2" />
		<Constant Name="Card.Inner.Horizontal.Margin" Value="2" />
	</Constants>
	<Variables>
		
	</Variables>
	<VisualDefinitions>
		
	</VisualDefinitions>

	<Window>
		<!-- General container -->
		<Widget Id="CraftingHeroPopup" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
			<Children>
				<!-- Background Tint -->
				<Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="BlankWhiteSquare_9" Color="#000000FF" AlphaFactor="0.6" />
				
				<!-- Popup Container -->
				<Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Popup.Width" SuggestedHeight="!Popup.Height" VerticalAlignment="Center" HorizontalAlignment="Center">
					<Children>
            <!-- Contents Container -->
						<Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="35" MarginRight="35">
							<Children>
                <ImageWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="StdAssets\Popup\order_popup_canvas" />
								<ImageWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="StdAssets\Popup\canvas_gradient" />
								<ImageWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginLeft="-20" MarginTop="-20" MarginRight="-20" MarginBottom="-20" Sprite="frame_9" />
								
                <!-- Select Hero Text-->
								<TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed" SuggestedHeight="45" HorizontalAlignment="Center" MarginTop="10" Text="@SelectHeroText" Brush="InventoryHeaderFontBrush" Brush.FontSize="34" />

								<!-- Inner Frame -->								
								<ScrollablePanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="60" MarginBottom="60" MarginLeft="40" MarginRight="40" HorizontalAlignment="Center" ClipRect="ClipRect" InnerPanel="ClipRect\OrderList" HorizontalScrollbar="HorizontalScrollbar" AutoHideScrollBars="true" Sprite="scrollable_field_9" Color="#FFFFFFFF">
									<Children>
										<NavigationForcedScopeCollectionTargeter CollectionParent="..\ClipRect" />
										<NavigationScopeTargeter ScopeID="OrderPopupScope" ScopeParent="..\ClipRect" ScopeMovements="Horizontal" />
                    <Widget Id="ClipRect" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="7" MarginBottom="7" MarginLeft="9" MarginRight="9" ClipContents="true">
                      <Children>
                        <ListPanel Id="OrderList" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="VerticalBottomToTop">
											    <Children>
                            
                            <!-- Crafting Heroes -->
												    <NavigatableListPanel Id="OrderList" DataSource="{CraftingHeroes}" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="HorizontalLeftToRight">
													    <ItemTemplate>
														    <!-- Card Template -->
                                <Widget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" DoNotPassEventsToChildren="@IsDisabled" SuggestedWidth="!Card.Width" MarginLeft="5" MarginRight="5" MarginTop="5" MarginBottom="5">
                                  <Children>
                                    <CardSelectionPopupButtonWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" DoNotPassEventsToChildren="true" Brush="Crafting.Order.Card" IsDisabled="@IsDisabled" IsSelected="@IsSelected" PropertiesContainer="Content\CardMiddle\PropertiesContainer" Command.Click="ExecuteSelection"  UpdateChildrenStates="true">
                                      <Children>
                                        <!-- Gradient -->
                                        <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="250" VerticalAlignment="Bottom" MarginRight="2" MarginLeft="2" MarginBottom="2" Sprite="scrollable_field_gradient_9"/>

                                        <!-- Content -->
                                        <ListPanel Id="Content" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="!Card.Inner.Vertical.Margin" MarginBottom="!Card.Inner.Vertical.Margin" MarginLeft="!Card.Inner.Horizontal.Margin" MarginRight="!Card.Inner.Horizontal.Margin" StackLayout.LayoutMethod="VerticalBottomToTop"  UpdateChildrenStates="true">
                                          <Children>
																						<!-- Card Top -->
                                            <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="7" StackLayout.LayoutMethod="VerticalBottomToTop" UpdateChildrenStates="true">
                                              <Children>

                                                <!-- Hero Name -->
                                                <TextWidget DataSource="{HeroData}" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="50" MarginTop="2" MarginBottom="2" MarginRight="5" MarginLeft="5" Brush="Crafting.Order.Card.Header" Text="@NameText" />
                                                
                                                <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren">
                                                  <Children>
                                                    <!-- Hero Image -->
                                                    <ImageIdentifierWidget DataSource="{HeroData\ImageIdentifier}" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="68" SuggestedHeight="51" HorizontalAlignment="Center" VerticalAlignment="Bottom" AdditionalArgs="@AdditionalArgs" ImageId="@Id" TextureProviderName="@TextureProviderName"/>
                                                    
                                                    <!--Stamina-->
                                                    <ListPanel WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="20" HorizontalAlignment="Right" MarginRight="30" StackLayout.LayoutMethod="VerticalTopToBottom">
                                                      <Children>
                                                        <!--Stamina Bar-->
                                                        <BrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="8" SuggestedHeight="40" HorizontalAlignment="Center" MarginBottom="2" Brush="TownManagement.GovernorPopup.GoldFrame">
                                                          <Children>
                                                            <FillBarVerticalClipTierColorsWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MaxAmount="@MaxStamina" InitialAmountAsFloat="@CurrentStamina" FillWidget="FillWidget" IsDirectionUpward="true" Sprite="BlankWhiteSquare_9" Color="#000000DD" MaxedColor="#08BF14FF" HighColor="#80AB22FF" MediumColor="#C75808FF" LowColor="#AD0303FF" HorizontalAlignment="Center">
                                                              <Children>
                                                                <Widget Id="FillWidget" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" Sprite="BlankWhiteSquare_9" Color="#348220FF"/>
                                                              </Children>
                                                            </FillBarVerticalClipTierColorsWidget>
                                                          </Children>
                                                        </BrushWidget>

                                                        <!--Stamina Text-->
                                                        <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Top" MarginBottom="5" Brush="Crafting.Stamina.Percentage.Text" Text="@StaminaPercentage" />
                                                      </Children>
                                                    </ListPanel>
                                                  </Children>
                                                </Widget>

                                                <!-- Divider -->
                                                <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="2" MarginLeft="30" MarginRight="30" MarginTop="4" MarginBottom="2" Sprite="BlankWhiteSquare_9" Color="#F09A29FF" />

                                                <!-- Skill Level -->
                                                <ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" VerticalAlignment="Top" HorizontalAlignment="Center" MarginTop="6" StackLayout.LayoutMethod="HorizontalLeftToRight" DoNotAcceptEvents="true">
                                                  <Children>
                                                    <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="27" SuggestedHeight="19" Sprite="General\Icons\ShopIcons\smithy_large" />
                                                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Brush="Crafting.Stamina.Percentage.Text" Brush.FontSize="20" IntText="@SmithySkillLevel" />
                                                  </Children>
                                                </ListPanel>

                                              </Children>
                                            </ListPanel>

                                            <!-- Card Middle -->
                                            <Widget Id="CardMiddle" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="300" MarginTop="30" MarginLeft="10" MarginRight="10" UpdateChildrenStates="true">
                                              <Children>
                                                <CircularAutoScrollablePanelWidget Id="PropertiesContainer" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ClipRect="ClipRect" InnerPanel="ClipRect\CardStats" ScrollType="ByPixels" ScrollPixelsPerSecond="45" IdleTime="1.65" UpdateChildrenStates="true">
                                                  <Children>
                                                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" Brush="Crafting.Order.Card.Header" Brush.FontSize="24" Brush.TextHorizontalAlignment="Center" Text="@PerksText"/>
                                                    <Widget Id="ClipRect" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ClipContents="true" MarginTop="30" UpdateChildrenStates="true">
                                                      <Children>
                                                        <!-- Crafting Perks -->
                                                        <ListPanel Id="CardStats" DataSource="{CraftingPerks}" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalTopToBottom">
                                                          <ItemTemplate>
                                                            <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" HorizontalAlignment="Left" Brush="Crafting.Order.Card.Property.Label" Text="@Name" MarginTop="15" />
                                                          </ItemTemplate>
                                                        </ListPanel>
                                                      </Children>
                                                    </Widget>
                                                    
                                                  </Children>
                                                </CircularAutoScrollablePanelWidget>

                                              </Children>
                                            </Widget>

                                          </Children>
                                        </ListPanel>
                                        
                                        <!-- Disable Overlay -->
                                        <Widget IsVisible="@IsDisabled" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
                                          <Children>
                                            <Widget  WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="BlankWhiteSquare_9" IsHidden="@HasAvailableHeroes" Color="#000000A0" SaturationFactor="-80"/>
                                            <Widget  WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="BlankWhiteSquare_9" IsVisible="@HasAvailableHeroes" Color="#00000060"/>
                                          </Children>
                                        </Widget>

                                      </Children>
                                    </CardSelectionPopupButtonWidget>
                                    
                                    <!-- Hint -->
                                    <HintWidget DataSource="{Hint}" WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="100" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
                                  </Children>
                                </Widget>
													    </ItemTemplate>
												    </NavigatableListPanel>
                        
                          </Children>
										    </ListPanel>                      
                      </Children>
                    </Widget>
                  
                    <!-- Scrollbar -->
								    <ScrollbarWidget Id="HorizontalScrollbar" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="6" HorizontalAlignment="Center" VerticalAlignment="Bottom" MarginLeft="15" MarginRight="15" MarginBottom="5" AlignmentAxis="Horizontal" Handle="HorizontalScrollbarHandle" MaxValue="100" MinValue="0">
									    <Children>
										    <Widget WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="6" HorizontalAlignment="Center" Sprite="BlankWhiteSquare_9" AlphaFactor="0.2" Color="#5a4033FF" />
										    <ImageWidget Id="HorizontalScrollbarHandle" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="10" MarginTop="1" MarginBottom="1" HorizontalAlignment="Center" Brush="FaceGen.Scrollbar.Handle" />
									    </Children>
								    </ScrollbarWidget>
                
									</Children>                
								</ScrollablePanel>
								
              </Children>
						</Widget>

            <!-- Close Button -->
            <ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="70" SuggestedHeight="70" HorizontalAlignment="Right" VerticalAlignment="Top" Brush="Popup.CloseButton" Command.Click="ExecuteClosePopup">
              <Children>
                <InputKeyVisualWidget DataSource="{ExitInputKey}" DoNotAcceptEvents="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="45" SuggestedHeight="45" HorizontalAlignment="Left" VerticalAlignment="Center" PositionXOffset="-15" KeyID="@KeyID" IsVisible="@IsVisible"/>
              </Children>
            </ButtonWidget>
          </Children>
				</Widget>
        
			</Children>
		</Widget>
	</Window>
</Prefab>