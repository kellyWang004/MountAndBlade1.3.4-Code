using System.Collections.Generic;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Issues;

public class HeroRelatedIssueCoolDownData : IssueCoolDownData
{
	[SaveableField(1)]
	public readonly Hero RelatedHero;

	internal static void AutoGeneratedStaticCollectObjectsHeroRelatedIssueCoolDownData(object o, List<object> collectedObjects)
	{
		((HeroRelatedIssueCoolDownData)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
	}

	protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
	{
		base.AutoGeneratedInstanceCollectObjects(collectedObjects);
		collectedObjects.Add(RelatedHero);
	}

	internal static object AutoGeneratedGetMemberValueRelatedHero(object o)
	{
		return ((HeroRelatedIssueCoolDownData)o).RelatedHero;
	}

	public HeroRelatedIssueCoolDownData(Hero hero, CampaignTime expireTime)
		: base(expireTime)
	{
		RelatedHero = hero;
	}

	public override bool IsRelatedTo(object obj)
	{
		if (obj is Hero hero)
		{
			return RelatedHero == hero;
		}
		return false;
	}

	public override bool IsValid()
	{
		if (base.IsValid() && RelatedHero != null)
		{
			return RelatedHero.IsAlive;
		}
		return false;
	}
}
