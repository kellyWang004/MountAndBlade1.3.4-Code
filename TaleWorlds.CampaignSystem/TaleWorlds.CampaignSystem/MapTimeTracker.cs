using System.Collections.Generic;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem;

internal class MapTimeTracker
{
	[SaveableField(0)]
	private long _numTicks;

	[SaveableField(1)]
	private long _deltaTimeInTicks;

	internal long NumTicks => _numTicks;

	internal long DeltaTimeInTicks => _deltaTimeInTicks;

	internal CampaignTime Now => new CampaignTime(_numTicks);

	internal static void AutoGeneratedStaticCollectObjectsMapTimeTracker(object o, List<object> collectedObjects)
	{
		((MapTimeTracker)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
	}

	protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
	{
	}

	internal static object AutoGeneratedGetMemberValue_numTicks(object o)
	{
		return ((MapTimeTracker)o)._numTicks;
	}

	internal static object AutoGeneratedGetMemberValue_deltaTimeInTicks(object o)
	{
		return ((MapTimeTracker)o)._deltaTimeInTicks;
	}

	internal MapTimeTracker(CampaignTime initialMapTime)
	{
		_numTicks = initialMapTime.NumTicks;
	}

	internal MapTimeTracker()
	{
		_numTicks = 0L;
	}

	internal void Tick(float seconds)
	{
		_deltaTimeInTicks = (long)(seconds * (float)CampaignTime.TimeTicksPerSecond);
		_numTicks += _deltaTimeInTicks;
	}
}
