<Prefab>

  <Constants>
    <Constant Name="Standard.PopupCloseButton.Width" BrushName="Standard.PopupCloseButton" BrushLayer="Default" BrushValueType="Width"/>
    <Constant Name="Standard.PopupCloseButton.Height" BrushName="Standard.PopupCloseButton" BrushLayer="Default" BrushValueType="Height"/>
  </Constants>

  <Parameters>
    <Parameter Name="ButtonText" DefaultValue="- Missing -" />
    <Parameter Name="ButtonAction" DefaultValue="" />
    <Parameter Name="IsEnabled" DefaultValue="true" />
    <Parameter Name="InputKeyDataSource" DefaultValue="" />
    <Parameter Name="DisabledHintDataSource" DefaultValue="" />
  </Parameters>

  <Window>
    <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Standard.PopupCloseButton.Width" SuggestedHeight="!Standard.PopupCloseButton.Height" HorizontalAlignment="Center" VerticalAlignment="Top">
      <Children>
        <ButtonWidget Id="ButtonWidget" DoNotPassEventsToChildren="true" Command.Click="*ButtonAction" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" IsEnabled="*IsEnabled" Brush="Standard.PopupCloseButton" UpdateChildrenStates="true">
          <Children>
            <TextWidget Text="*ButtonText" DoNotAcceptEvents="true" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="Standard.DialogCloseButtons.ButtonText">
              <Children>
                <Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Left" VerticalAlignment="Center" PositionXOffset="-40" PositionYOffset="-1" IsVisible="*IsEnabled">
                  <Children>
                    <InputKeyVisualWidget DataSource="*InputKeyDataSource" DoNotAcceptEvents="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="40" SuggestedHeight="40" KeyID="@KeyID" IsVisible="@IsVisible"/>
                  </Children>
                </Widget>
              </Children>
            </TextWidget>
          </Children>
        </ButtonWidget>
        <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" IsDisabled="*IsEnabled">
          <Children>
            <HintWidget DataSource="*DisabledHintDataSource" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" />
          </Children>
        </Widget>
      </Children>
    </Widget>

  </Window>

</Prefab>