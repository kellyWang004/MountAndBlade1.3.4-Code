<Prefab>
  <Constants>
    <Constant Name="CircleSelected.Additive" Value="10" />

    <Constant Name="Circle.Height" BrushLayer="Default" BrushName="Mission.Radial.Item.Background" BrushValueType="Height" />
    <Constant Name="Circle.Width" BrushLayer="Default" BrushName="Mission.Radial.Item.Background" BrushValueType="Width" />

    <Constant Name="Circle.Selected.Height" Additive="!CircleSelected.Additive" Value="!Circle.Height" />
    <Constant Name="Circle.Selected.Width" Additive="!CircleSelected.Additive" Value="!Circle.Width" />

    <Constant Name="CircleGlow.Height" BrushLayer="Default" BrushName="Mission.Radial.Item.Glow" BrushValueType="Height" />
    <Constant Name="CircleGlow.Width" BrushLayer="Default" BrushName="Mission.Radial.Item.Glow" BrushValueType="Width" />

    <Constant Name="CircleGlow.Selected.Height" Additive="!CircleSelected.Additive" Value="!CircleGlow.Height" />
    <Constant Name="CircleGlow.Selected.Width" Additive="!CircleSelected.Additive" Value="!CircleGlow.Width" />
  </Constants>
  <Window>
    <MainAgentControlModeParentWidget DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ControlModesList="Container\ControlModesParent" SelectionIndicatorWidget="IndicatorWidget" ChildItemId="ControlModeItem" AnimationFirstStepDuration="0.05" AnimationSecondStepDuration="0.7" IsActive="@IsEnabled" >
      <Children>

        <Widget Id="Container" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="200" SuggestedHeight="200" HorizontalAlignment="Center" VerticalAlignment="Bottom" PositionYOffset="-130" IsVisible="@IsEnabled">
          <Children>
            <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="459" SuggestedHeight="459" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="General\RadialMenu\radial_menu_bg" Color="#000000FF" AlphaFactor="0.6"/>

            <ListPanel Id="ControlModesParent" DataSource="{ControlModes}" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" StackLayout.LayoutMethod="HorizontalLeftToRight">
              <ItemTemplate>
                <ListPanel WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" StackLayout.LayoutMethod="VerticalBottomToTop" MarginLeft="5" MarginRight="5">
                  <Children>
                    <ButtonWidget Id="ControlModeItem" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="117" SuggestedHeight="115" HorizontalAlignment="Center" VerticalAlignment="Center" IsSelected="@IsActive" IsDisabled="@IsDisabled" UpdateChildrenStates="true" Brush="Mission.ControlMode.Item.Glow" >
                      <Children>
                        <ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="75" SuggestedHeight="74" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="Mission.Radial.Item.Background" UpdateChildrenStates="true">
                          <Children>
                            <DefaultLayerSpriteChangerBrushWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="45" SuggestedHeight="45" HorizontalAlignment="Center" VerticalAlignment="Center" PositionYOffset="3" Command.Click="ExecuteAction" Brush="Mission.ControlMode.Icon.Glow" SpriteBrush="Mission.ControlMode.Icon.Brush" SpriteBrushLayerName="@TypeId" />
                            <Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Top" PositionYOffset="-30" IsHidden="@IsDisabled">
                              <Children>
                                <InputKeyVisualWidget DataSource="{ToggleInputKey}" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="55" SuggestedHeight="55" KeyID="@KeyID" />
                              </Children>
                            </Widget>
                          </Children>
                        </ButtonWidget>
                      </Children>
                    </ButtonWidget>

                    <Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="Fixed" SuggestedHeight="20" HorizontalAlignment="Center" VerticalAlignment="Bottom" PositionYOffset="-10">
                      <Children>
                        <TextWidget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="100" VerticalAlignment="Top" HorizontalAlignment="Center" Text="@Description" Brush="Mission.ControlMode.Item.Description.Text"/>
                      </Children>
                    </Widget>
                  </Children>
                </ListPanel>
              </ItemTemplate>
            </ListPanel>

          </Children>
        </Widget>

        <Widget Id="IndicatorWidget" DataSource="{LastUsedItem}" DoNotAcceptEvents="true" DoNotPassEventsToChildren="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="55" SuggestedHeight="55" HorizontalAlignment="Center" VerticalAlignment="Center">
          <Children>
            <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="75" SuggestedHeight="75" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="General\RadialMenu\radial_menu_item_background" Color="#00000055"/>
            <DefaultLayerSpriteChangerBrushWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Mission.ControlMode.Icon.Glow" SpriteBrush="Mission.ControlMode.Icon.Brush" SpriteBrushLayerName="@TypeId" IsVisible="@IsActive"/>
            <DefaultLayerSpriteChangerBrushWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Mission.ControlMode.Icon.Glow" SpriteBrush="Mission.ControlMode.Exit.Icon.Brush" SpriteBrushLayerName="@TypeId" IsHidden="@IsActive"/>
          </Children>
        </Widget>
        
      </Children>
    </MainAgentControlModeParentWidget>
  </Window>
</Prefab>