<Prefab>
  <Constants>
  </Constants>
  <VisualDefinitions>

  </VisualDefinitions>
  <Window>
    <ObjectiveMarkersParentWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" IsMarkersEnabled="@IsEnabled" MarkersContainer="MarkersContainer" MinDistanceToFocus="80" MaxDistanceToCombineMarkers="22">
      <Children>

        <Widget Id="MarkersContainer" DataSource="{Targets}" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
          <ItemTemplate>

            <ObjectiveMarkerWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="40" SuggestedHeight="40" Position="@ScreenPosition" MainContainer="MainContainer" NameTextWidget="MainContainer\NameAndDistanceContainer\NameTextWidget" CombinationCountWidget="MainContainer\QuestIconWidget\CombinedMarkerCountWidget" DistanceContainerWidget="MainContainer\NameAndDistanceContainer\DistanceInfo" DistanceTextWidget="MainContainer\NameAndDistanceContainer\DistanceInfo\DistanceText" DistanceIconWidget="MainContainer\NameAndDistanceContainer\DistanceInfo\DistanceIcon" QuestIconWidget="MainContainer\QuestIconWidget" IsMarkerEnabled="@IsEnabled" IsMarkerActive="@IsActive" Distance="@Distance" FarAlphaTarget="0.7" FarDistanceCutoff="250" CloseDistanceCutoff="25" >
              <Children>

                <ListPanel Id="MainContainer" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" StackLayout.LayoutMethod="VerticalBottomToTop" >
                  <Children>

                    <IconBrushWidget Id="QuestIconWidget" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedHeight="42" SuggestedWidth="25" HorizontalAlignment="Center" IconID="@ObjectiveTypeId" IconBrush="Mission.Objective.Type.Icons" UseIconSize="true" >
                      <Children>
                        <!-- Combination Count Widget -->
                        <TextWidget Id="CombinedMarkerCountWidget" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Left" VerticalAlignment="Top" PositionXOffset="25" PositionYOffset="25" Brush="Mission.Objective.Marker.CombinedMarkerCount.Text" />
                      </Children>
                    </IconBrushWidget>

                    <ListPanel Id="NameAndDistanceContainer" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" StackLayout.LayoutMethod="VerticalBottomToTop" >
                      <Children>

                        <TextWidget Id="NameTextWidget" WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="200" Text="@ObjectiveName" HorizontalAlignment="Center" Brush="Mission.Objective.Marker.Name.Text" OverrideDefaultStateSwitchingEnabled="true" ClipContents="false"/>

                        <ListPanel Id="DistanceInfo" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" PositionYOffset="0" HorizontalAlignment="Center" StackLayout.LayoutMethod="HorizontalLeftToRight" >
                          <Children>
                            <BrushWidget Id="DistanceIcon" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="14" SuggestedHeight="20" PositionYOffset="3" Brush="NameMarker.Distance.Icon" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            <TextWidget Id="DistanceText" WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" Brush="Mission.Objective.Marker.Distance.Text" MarginLeft="4" MarginTop="5" IntText="@Distance" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                          </Children>
                        </ListPanel>

                      </Children>
                    </ListPanel>
                    
                  </Children>
                </ListPanel>

              </Children>
            </ObjectiveMarkerWidget>

          </ItemTemplate>
        </Widget>

      </Children>
    </ObjectiveMarkersParentWidget>
  </Window>
</Prefab>