<Prefab>
  <Constants>
    <Constant Name="Visual.Width" Value="70" />
    <Constant Name="Visual.Height" MultiplyResult="0.71" Value="!Visual.Width" />
    <Constant Name="Roster.Button.Width" BrushLayer="Default" BrushName="Port.Roster.Button.Background" BrushValueType="Width" />
    <Constant Name="Roster.Button.Height" BrushLayer="Default" BrushName="Port.Roster.Button.Background" BrushValueType="Height" />
  </Constants>
  <VisualDefinitions>
    <VisualDefinition Name="RosterButton" EaseType="EaseInOut" EaseFunction="Sine" TransitionDuration="0.2">
      <VisualState MarginTop="-20" State="Default" />
      <VisualState MarginTop="-19" State="Pressed" />
      <VisualState MarginTop="-18" State="Hovered" />
      <VisualState MarginTop="-20" State="Disabled" />
      <VisualState MarginTop="-5" State="Selected" />
    </VisualDefinition>
  </VisualDefinitions>
  <Window>
    <Widget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren">
      <Children>
        <ButtonWidget DoNotPassEventsToChildren="true" VisualDefinition="RosterButton" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Roster.Button.Width" SuggestedHeight="!Roster.Button.Height" MarginTop="-20" Command.Click="ExecuteSelectRoster" IsSelected="@IsSelected" IsEnabled="@HasAnyShips" Brush="Port.Roster.Button.Background" UpdateChildrenStates="true">
          <Children>

            <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Sprite="scrollable_field_gradient_9" MarginBottom="60" MarginLeft="10" MarginRight="10" Color="#00000088" VerticalFlip="true" />

            <!-- With Owner Info -->
            <ListPanel UpdateChildrenStates="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginBottom="16" MarginTop="24" MarginLeft="60" MarginRight="60" StackLayout.LayoutMethod="HorizontalLeftToRight" IsVisible="@HasOwnerCharacter">
              <Children>
                <ImageIdentifierWidget DataSource="{OwnerCharacterVisual}" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!Visual.Width" SuggestedHeight="!Visual.Height" MarginLeft="16" HorizontalAlignment="Left" VerticalAlignment="Bottom" AdditionalArgs="@AdditionalArgs" ImageId="@Id" TextureProviderName="@TextureProviderName" />

                <ListPanel UpdateChildrenStates="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Bottom" MarginLeft="12" MarginBottom="6" StackLayout.LayoutMethod="VerticalBottomToTop">
                  <Children>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="26" Text="@Name" Brush="Port.Roster.Button.Name.Text"/>
                    <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="18" Text="@ShipCountText" Brush="Port.Roster.Button.Info.Text"/>
                  </Children>
                </ListPanel>

                <ListPanel WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="100" MarginBottom="4" MarginLeft="8" StackLayout.LayoutMethod="VerticalBottomToTop">
                  <Children>

                    <!-- Weight -->
                    <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="HorizontalLeftToRight">
                      <Children>
                        <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="25" SuggestedHeight="25" VerticalAlignment="Center">
                          <Children>
                            <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="25" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="PortScreen\icon_weight" />
                          </Children>
                        </Widget>
                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" VerticalAlignment="Center" Text="@WeightText" Brush="Port.Roster.Button.Info.Text" Brush.TextHorizontalAlignment="Left" Brush.FontSize="14">
                          <Children>
                            <BoolStateChangerWidget BooleanCheck="@IsWeightDangerous" TrueState="Danger" FalseState="Default" TargetWidget="..\." />
                          </Children>
                        </TextWidget>
                      </Children>
                    </ListPanel>

                    <!-- Troop Count -->
                    <ListPanel WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" StackLayout.LayoutMethod="HorizontalLeftToRight">
                      <Children>
                        <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="25" SuggestedHeight="25" VerticalAlignment="Center">
                          <Children>
                            <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="25" SuggestedHeight="23" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="General\Icons\Party@2x" />
                          </Children>
                        </Widget>
                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" VerticalAlignment="Center" Text="@TroopCountText" Brush="Port.Roster.Button.Info.Text" Brush.TextHorizontalAlignment="Left" Brush.FontSize="14">
                          <Children>
                            <BoolStateChangerWidget BooleanCheck="@IsTroopCountDangerous" TrueState="Danger" FalseState="Default" TargetWidget="..\." />
                          </Children>
                        </TextWidget>
                      </Children>
                    </ListPanel>
                  </Children>
                </ListPanel>

              </Children>
            </ListPanel>

            <!-- Without Owner Info -->
            <ListPanel UpdateChildrenStates="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" VerticalAlignment="Bottom" MarginBottom="22" MarginLeft="70" MarginRight="70" StackLayout.LayoutMethod="VerticalBottomToTop" IsHidden="@HasOwnerCharacter">
              <Children>
                <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="26" Text="@Name" Brush="Port.Roster.Button.Name.Text" Brush.TextHorizontalAlignment="Center"/>
                <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="18" Text="@ShipCountText" Brush="Port.Roster.Button.Info.Text" Brush.TextHorizontalAlignment="Center"/>
              </Children>
            </ListPanel>

            <BrushWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Port.Roster.Button.Frame" />

            <HintWidget DataSource="{Tooltip}" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" IsEnabled="false" />

          </Children>
        </ButtonWidget>

        <HintWidget DataSource="{Tooltip}" Command.HoverBegin="ExecuteBeginHint" Command.HoverEnd="ExecuteEndHint" IsEnabled="false" />

      </Children>
    </Widget>
  </Window>
</Prefab>